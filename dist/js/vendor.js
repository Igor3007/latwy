class afLightbox{constructor(e){this.modal="",e&&(this.mobileBottom=e.mobileInBottom||!1)}init(){}createTemplate(){var e=document.createElement("div");return e.innerHTML='<div class="af-popup"> <div class="af-popup__bg"></div><div class="af-popup__wrp"><div class="af-popup__container"><div class="af-popup__close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg></div><div class="af-popup__content"></div></div></div></div>',document.body.append(e),this.instanse=e}open(e,t){let s=this;this.modal=this.createTemplate(),window.innerWidth<=480&&this.mobileBottom&&this.modal.querySelector(".af-popup").classList.add("af-popup--mobile"),document.body.classList.add("page-hidden"),this.modal.querySelector(".af-popup__content").innerHTML=e,this.modal.querySelector(".af-popup__close").addEventListener("click",function(){s.close()}),this.modal.querySelector('[data-af-popup="close"]')&&this.modal.querySelector('[data-af-popup="close"]').addEventListener("click",function(e){s.close()}),t&&t(this.modal),setTimeout(()=>{this.modal.querySelector(".af-popup").classList.add("af-popup--visible")},10),this.createEvent()}changeContent(e){this.modal.querySelector(".af-popup__content").innerHTML=e}createEvent(){let t=this;this.instanse.querySelector(".af-popup").addEventListener("click",function(e){e.target.closest(".af-popup__container")||t.close()})}close(){document.body.classList.contains("page-hidden")&&document.body.classList.remove("page-hidden"),this.instanse.querySelector(".af-popup").classList.remove("af-popup--visible"),setTimeout(()=>{this.instanse.remove()},300)}}class customSelect{constructor(e){this.selector=e.selector,this.selectAll=document.querySelectorAll(this.selector)}init(){this.renderTemplate(),this.clickEventOut()}reinit(e){e=e.parentNode;e.querySelector(".select-styled")&&(e.querySelector(".select-styled").remove(),e.querySelector(".select-list").remove()),this.renderOption(e)}ajaxOption(e,t){let s=new XMLHttpRequest;return s.open("GET",e.dataset.ajax),s.responseType="json",s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.send(),s.onerror=function(){console.err("Error: afSelec ajax request failed")},s.onreadystatechange=function(){3==s.readyState&&e.closest(".af-select").querySelector(".select-list").classList.add("select-list--load"),4==s.readyState&&e.closest(".af-select").querySelector(".select-list").classList.remove("select-list--load")},s.onload=function(){t(s.response)},null}renderOption(a){var l=this,n=a.querySelector("select"),i=n.getAttribute("placeholder"),r=n.getAttribute("multiple");let o=document.createElement("div"),c=(o.classList.add("select-styled"),o.innerHTML="<span>"+i+"</span>",document.createElement("ul")),e=(c.classList.add("select-options"),document.createElement("div"));function p(e){e.querySelectorAll("select > option").forEach(function(e,t){var s,a=document.createElement("li");function n(e){if(r){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(","):i}return e.innerText}a.innerHTML=e.innerText,a.setAttribute("rel",e.value),r&&((s=document.createElement("span")).classList.add("af-check-multiple"),a.append(s)),0!=t||i||(o.innerHTML="<span>"+e.innerText+"</span>"),e.getAttribute("selected")&&(o.innerHTML=i?'<span class="af-selected-placeholder" data-af-placeholder="'+i+'">'+n(e)+"</span>":"<span>"+n(e)+"</span>",a.classList.add("active")),e.getAttribute("disabled")||(c.appendChild(a),l.clickEventListItem(a,e,t))})}e.classList.add("select-list"),e.appendChild(c),a.querySelector(".select-styled")||a.appendChild(o),a.querySelector(".select-options")||a.appendChild(e),n.dataset.ajax&&this.ajaxOption(n,function(e){n.innerHTML="";let s=n.dataset.selected,t=n.getAttribute("placeholder");e.unshift({text:t||"-Выберите-",value:""}),e.forEach(function(e){var t=document.createElement("option");t.value=e.value,t.innerText=e.text,s==e.value&&(t.setAttribute("selected",!0),n.removeAttribute("data-selected")),n.append(t)}),p(a)}),n.dataset.ajax||p(a),n.afSelect=new Object,n.afSelect.open=function(){l.openSelect(a)},n.afSelect.close=function(){l.closeSelect()},n.afSelect.update=function(){l.reinit(n)}}renderTemplate(){let a=this,n=[];this.selectAll.forEach(function(e,t){var s;e.classList.contains("select-hidden")||(e.classList.add("select-hidden"),(s=document.createElement("div")).classList.add("af-select"),e.getAttribute("multiple")&&s.classList.add("af-select--multiple"),s.innerHTML=e.outerHTML,e.parentNode.replaceChild(s,e),a.clickEventOpenSelect(s),n.push(s))}),n.forEach(function(e,t){a.renderOption(e)})}openSelect(e){document.querySelectorAll("select").forEach(function(e){e.afSelect&&e.afSelect.close()}),e.querySelector("select").dataset.ajax&&!e.querySelector(".select-styled").classList.contains("active")&&(e.querySelector(".select-list").remove(),this.renderOption(e)),e.style.maxWidth=e.offsetWidth+"px",e.querySelector(".select-styled").classList.toggle("active"),e.querySelector(".select-options").classList.toggle("active"),e.querySelector(".select-list").classList.toggle("active"),document.querySelector("body").classList.toggle("af-select-open")}closeSelect(){if(!document.querySelector(".select-styled.active"))return!1;document.querySelector(".select-styled.active").classList.remove("active"),document.querySelector(".select-options.active").classList.remove("active"),document.querySelector(".select-list.active").classList.remove("active"),document.querySelector("body").classList.remove("af-select-open")}clickEventOut(){let e=this;document.addEventListener("click",function(){e.closeSelect()})}clickEventListItem(e,a,t){let n=a.parentNode.parentNode,l=this,i=n.querySelector("select").getAttribute("placeholder"),r=n.querySelector("select").getAttribute("multiple"),o=n.querySelector(".select-styled");e.addEventListener("click",function(e){function t(e){if(r){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(","):i}return e.innerText}e.stopPropagation(),e.preventDefault(),n.querySelector(".select-options li.active")&&!r&&n.querySelector(".select-options li.active").classList.remove("active"),this.classList.contains("active")?(this.classList.remove("active"),a.removeAttribute("selected")):(this.classList.add("active"),a.setAttribute("selected","selected")),i?o.innerHTML='<span class="af-selected-placeholder" data-af-placeholder="'+i+'">'+t(a)+"</span>":n.querySelector(".select-styled span").innerHTML=t(a),r||(n.querySelector("select").value=this.getAttribute("rel"));var s=new Event("change");n.querySelector("select").dispatchEvent(s),e.target.classList.contains("af-check-multiple")||l.closeSelect()})}clickEventOpenSelect(e){let t=this;function s(e){e.stopPropagation(),e.preventDefault(),t.openSelect(this)}e.removeEventListener("click",s),e.addEventListener("click",s)}}((e,t)=>{"object"==typeof exports&&typeof module<"u"?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).Maska={})})(this,function(e){var n=Object.defineProperty,s=(e,t,s)=>{return a=s,(t="symbol"!=typeof t?t+"":t)in(e=e)?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,s;var a};let a={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class l{constructor(e={}){s(this,"opts",{}),s(this,"memo",new Map);e={...e};if(null!=e.tokens){e.tokens=e.tokensReplace?{...e.tokens}:{...a,...e.tokens};for(var t of Object.values(e.tokens))"string"==typeof t.pattern&&(t.pattern=new RegExp(t.pattern))}else e.tokens=a;Array.isArray(e.mask)&&(1<e.mask.length?e.mask=[...e.mask].sort((e,t)=>e.length-t.length):e.mask=e.mask[0]??""),""===e.mask&&(e.mask=null),this.opts=e}masked(e){return this.process(e,this.findMask(e))}unmasked(e){return this.process(e,this.findMask(e),!1)}isEager(){return!0===this.opts.eager}isReversed(){return!0===this.opts.reversed}completed(e){var t=this.findMask(e);if(null==this.opts.mask||null==t)return!1;let s=this.process(e,t).length;return"string"==typeof this.opts.mask?s>=this.opts.mask.length:"function"==typeof this.opts.mask?s>=t.length:this.opts.mask.filter(e=>s>=e.length).length===this.opts.mask.length}findMask(t){var e=this.opts.mask;if(null==e)return null;if("string"==typeof e)return e;if("function"==typeof e)return e(t);let s=this.process(t,e.slice(-1).pop()??"",!1);return e.find(e=>this.process(t,e,!1).length>=s.length)??""}escapeMask(s){let a=[],n=[];return s.split("").forEach((e,t)=>{"!"===e&&"!"!==s[t-1]?n.push(t-n.length):a.push(e)}),{mask:a.join(""),escaped:n}}process(e,t,s=!0){if(null==t)return e;var a=`value=${e},mask=${t},masked=`+(s?1:0);if(this.memo.has(a))return this.memo.get(a);let{mask:n,escaped:l}=this.escapeMask(t),i=[],r=null!=this.opts.tokens?this.opts.tokens:{},o=this.isReversed()?-1:1,c=this.isReversed()?"unshift":"push",p=this.isReversed()?0:n.length-1,u=this.isReversed()?()=>-1<v&&-1<f:()=>v<n.length&&f<e.length,d=e=>!this.isReversed()&&e<=p||this.isReversed()&&e>=p,h,m=-1,v=this.isReversed()?n.length-1:0,f=this.isReversed()?e.length-1:0;for(;u();){var k,y=n.charAt(v),g=r[y],S=null!=(null==g?void 0:g.transform)?g.transform(e.charAt(f)):e.charAt(f);if(l.includes(v)||null==g?(s&&!this.isEager()&&i[c](y),S!==y||this.isEager()?h=y:f+=o,this.isEager()||(v+=o)):(null!=S.match(g.pattern)?(i[c](S),g.repeated?(-1===m?m=v:v===p&&v!==m&&(v=m-o),p===m&&(v-=o)):g.multiple&&(v-=o),v+=o):g.multiple?(y=null!=(null==(y=i[f-o])?void 0:y.match(g.pattern)),k=n.charAt(v+o),y&&""!==k&&null==r[k]?(v+=o,f-=o):i[c]("")):S===h?h=void 0:g.optional&&(v+=o,f-=o),f+=o),this.isEager())for(;d(v)&&(null==r[n.charAt(v)]||l.includes(v));)s?i[c](n.charAt(v)):n.charAt(v)===e.charAt(f)&&(f+=o),v+=o}return this.memo.set(a,i.join("")),this.memo.get(a)}}let i=e=>JSON.parse(e.replaceAll("'",'"')),r=(e,t={})=>{var s,t={...t};return null!=e.dataset.maska&&""!==e.dataset.maska&&(t.mask=(s=e.dataset.maska).startsWith("[")&&s.endsWith("]")?i(s):s),null!=e.dataset.maskaEager&&(t.eager=o(e.dataset.maskaEager)),null!=e.dataset.maskaReversed&&(t.reversed=o(e.dataset.maskaReversed)),null!=e.dataset.maskaTokensReplace&&(t.tokensReplace=o(e.dataset.maskaTokensReplace)),null!=e.dataset.maskaTokens&&(t.tokens=(e=>{if(e.startsWith("{")&&e.endsWith("}"))return i(e);const s={};return e.split("|").forEach(e=>{const t=e.split(":");s[t[0]]={pattern:new RegExp(t[1]),optional:t[2]==="optional",multiple:t[2]==="multiple",repeated:t[2]==="repeated"}}),s})(e.dataset.maskaTokens)),t},o=e=>""===e||!!JSON.parse(e);class c{constructor(e,t={}){s(this,"items",new Map),s(this,"beforeinputEvent",e=>{var t=e.target,s=this.items.get(t);s.isEager()&&"inputType"in e&&e.inputType.startsWith("delete")&&s.unmasked(t.value).length<=1&&this.setMaskedValue(t,"")}),s(this,"inputEvent",t=>{if(!(t instanceof CustomEvent&&"input"===t.type&&null!=t.detail&&"object"==typeof t.detail&&"masked"in t.detail)){var s,a,n=t.target,l=this.items.get(n),i=n.value,r=n.selectionStart,o=n.selectionEnd;let e=i;if(l.isEager()&&(s=l.masked(i),""===(a=l.unmasked(i))&&"data"in t&&null!=t.data?e=t.data:a!==l.unmasked(s)&&(e=a)),this.setMaskedValue(n,e),"inputType"in t&&(t.inputType.startsWith("delete")||null!=r&&r<i.length))try{n.setSelectionRange(r,o)}catch{}}}),this.options=t,"string"==typeof e?this.init(Array.from(document.querySelectorAll(e)),this.getMaskOpts(t)):this.init("length"in e?Array.from(e):[e],this.getMaskOpts(t))}destroy(){for(var e of this.items.keys())e.removeEventListener("input",this.inputEvent),e.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(e,t){var s=this.items.get(e),e=new l(r(e,this.getMaskOpts(t)));return JSON.stringify(s.opts)!==JSON.stringify(e.opts)}needUpdateValue(e){var t=e.dataset.maskaValue;return null==t&&""!==e.value||null!=t&&t!==e.value}getMaskOpts(e){let{onMaska:t,preProcess:s,postProcess:a,...n}=e;return n}init(e,t){for(var s of e){var a=new l(r(s,t));this.items.set(s,a),""!==s.value&&this.setMaskedValue(s,s.value),s.addEventListener("input",this.inputEvent),s.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(e,t){var s=this.items.get(e);null!=this.options.preProcess&&(t=this.options.preProcess(t));let a=s.masked(t),n=s.unmasked(s.isEager()?a:t),l=s.completed(t),i={masked:a,unmasked:n,completed:l};t=a,null!=this.options.postProcess&&(t=this.options.postProcess(t)),e.value=t,e.dataset.maskaValue=t,null!=this.options.onMaska&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(e=>e(i)):this.options.onMaska(i)),e.dispatchEvent(new CustomEvent("maska",{detail:i})),e.dispatchEvent(new CustomEvent("input",{detail:i}))}}let p=new WeakMap;e.Mask=l,e.MaskInput=c,e.tokens=a,e.vMaska=(e,s)=>{var e=e instanceof HTMLInputElement?e:e.querySelector("input"),a={...s.arg};if(null!=e){t=e,setTimeout(()=>{var e;!0===(null==(e=p.get(t))?void 0:e.needUpdateValue(t))&&t.dispatchEvent(new CustomEvent("input"))});var t,n=p.get(e);if(null!=n){if(!n.needUpdateOptions(e,a))return;n.destroy()}if(null!=s.value){let t=s.value,e=e=>{t.masked=e.masked,t.unmasked=e.unmasked,t.completed=e.completed};a.onMaska=null==a.onMaska?e:Array.isArray(a.onMaska)?[...a.onMaska,e]:[a.onMaska,e]}p.set(e,new c(e,a))}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});